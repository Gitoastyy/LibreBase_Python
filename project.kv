#:import Button kivy.uix.button.Button

WindowManager:
    MainWindow:
    book:
    publisher:
    years:
    genre:
    browseBook:
    browsePublisher:
    browseYear:
    browseGenre:

<GridLayout>:
    spacing: 10



<Label>:
    canvas.before:
        Color:
            rgba: 0.627, 0.125, 0.941, 0.7
        Rectangle:
            pos: self.pos
            size: self.size

<Button>:
    background_color: (1, 0.412, 0.706, 0.7)

<MainWindow>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/mainMenuLibrary.jpg'
    name: "menu"

    GridLayout:
        cols: 1
        size_hint: 0.3, 1
        pos_hint: {"x": 0, "y": 0}

        Button:
            text: "Knjige"
            on_release:
                root.tableBook()
                app.root.current = "book"
                root.manager.transition.direction = "left"

        Button:
            text: "Izdavači"
            on_release:
                root.tablePublisher()
                app.root.current = "publisher"
                root.manager.transition.direction = "left"

        Button:
            text: "Godine"
            on_release:
                root.tableYear()
                app.root.current = "years"
                root.manager.transition.direction = "left"

        Button:
            text: "Žanrovi"
            on_release:
                root.tableGenre()
                app.root.current = "genre"
                root.manager.transition.direction = "left"

    GridLayout:
        cols: 1
        rows: 4
        size_hint: 0.3, 1
        pos_hint: {"x": 0.35, "y": 0}

        Widget:
            size_hint_y:1
        Widget:
            size_hint_y:1
        Widget:
            size_hint_y:1

        Button:
            text: "Exit"
            on_release:
                app.stop()
                root.closure()

    GridLayout:
        cols: 1
        size_hint: 0.3, 1
        pos_hint: {"x": 0.7, "y": 0}

        Button:
            text: "Pregled knjiga"
            on_release:
                root.tableBook()
                app.root.current = "browseBook"
                root.manager.transition.direction = "right"

        Button:
            text: "Pregled izdavača"
            on_release:
                root.tablePublisher()
                app.root.current = "browsePublisher"
                root.manager.transition.direction = "right"

        Button:
            text: "Pregled godina"
            on_release:
                root.tableYear()
                app.root.current = "browseYear"
                root.manager.transition.direction = "right"

        Button:
            text: "Pregled žanrova"
            on_release:
                root.tableGenre()
                app.root.current = "browseGenre"
                root.manager.transition.direction = "right"

<book>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/booksEdit.jpg'
    name: "book"


    GridLayout:
        cols: 2

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll, ime, og, publisher, genre, godina)

        GridLayout:
            cols: 1
            rows: 2

            GridLayout:
                cols: 2
                rows: 5
                padding: [10, 0, 10, 0]

                Label:
                    text: "Ime"

                TextInput:
                    id: ime

                Label:
                    text: "Original"

                TextInput:
                    id: og

                Label:
                    text: "Izdavač"

                TextInput:
                    id: publisher

                Label:
                    text: "Žanr"

                TextInput:
                    id: genre

                Label:
                    text: "Godina"

                TextInput:
                    id: godina

            GridLayout:
                cols: 4
                rows: 1
                padding: [10, 100, 10, 100]

                Button:
                    text: "Novi"
                    on_release:
                        root.new([ime.text, og.text, publisher.text, genre.text, godina.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, ime, og, publisher, genre, godina)



                Button:
                    text: "Spremi"
                    on_release:
                        root.edit([ime.text, og.text, publisher.text, genre.text, godina.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, ime, og, publisher, genre, godina)


                Button:
                    text: "Obriši"
                    on_release:
                        root.deletion()
                        Scroll.clear_widgets()
                        root.createListView(Scroll, ime, og, publisher, genre, godina)


                Button:
                    text: "Povratak"
                    on_release:
                        app.root.current = "menu"
                        root.manager.transition.direction = "right"


<publisher>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/publisherEdit.jpeg'
    name: "publisher"

    GridLayout:
        cols: 2

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post:
                Scroll.clear_widgets()
                root.createListView(Scroll, publisher, godina)

        GridLayout:
            cols: 1
            rows: 2

            GridLayout:
                cols: 2
                rows: 3

                Label:
                    text: "Izdavač"

                TextInput:
                    id: publisher

                Label:
                    text: "Godina osnivanja"

                TextInput:
                    id: godina

            GridLayout:
                cols: 4
                rows: 1
                padding: [10, 100, 10, 100]

                Button:
                    text: "Novi"
                    on_release:
                        root.new([publisher.text, godina.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, publisher, godina)


                Button:
                    text: "Spremi"
                    on_release:
                        root.edit([publisher.text, godina.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, publisher, godina)


                Button:
                    text: "Obriši"
                    on_release:
                        root.deletion()
                        Scroll.clear_widgets()
                        root.createListView(Scroll, publisher, godina)


                Button:
                    text: "Povratak"
                    on_release:
                        app.root.current = "menu"
                        root.manager.transition.direction = "right"

<years>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/yearsEdit.png'
    name: "years"

    GridLayout:
        cols: 2

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll, godina)

        GridLayout:
            cols: 1
            rows: 2

            GridLayout:
                cols: 2
                rows: 1

                Label:
                    text: "Godina"

                TextInput:
                    id: godina

            GridLayout:
                cols: 3
                rows: 1
                padding: [10, 100, 10, 100]

                Button:
                    text: "Novi"
                    on_release:
                        root.new([godina.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, godina)

                Button:
                    text: "Obriši"
                    on_release:
                        root.deletion()
                        Scroll.clear_widgets()
                        root.createListView(Scroll, godina)

                Button:
                    text: "Povratak"
                    on_release:
                        app.root.current = "menu"
                        root.manager.transition.direction = "right"

<genre>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/genreEdit.jpg'
    name: "genre"

    GridLayout:
        cols: 2

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll, genre)

        GridLayout:
            cols: 1
            rows: 2

            GridLayout:
                cols: 2
                rows: 1

                Label:
                    text: "Žanr"

                TextInput:
                    id: genre

            GridLayout:
                cols: 3
                rows: 1
                padding: [10, 100, 10, 100]

                Button:
                    text: "Novi"
                    on_release:
                        root.new([genre.text])
                        Scroll.clear_widgets()
                        root.createListView(Scroll, genre)

                Button:
                    text: "Obriši"
                    on_release:
                        root.deletion()
                        Scroll.clear_widgets()
                        root.createListView(Scroll, genre)

                Button:
                    text: "Povratak"
                    on_release:
                        app.root.current = "menu"
                        root.manager.transition.direction = "right"

<browseBook>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/booksBrowse.jpg'
    name: "browseBook"


    GridLayout:
        cols: 1

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll)

        Button:
            text: "Povratak"
            on_release:
                app.root.current = "menu"
                root.manager.transition.direction = "left"

<browsePublisher>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/publisherBrowse.jpg'
    name: "browsePublisher"


    GridLayout:
        cols: 1

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll)

        Button:
            text: "Povratak"
            on_release:
                app.root.current = "menu"
                root.manager.transition.direction = "left"

<browseGenre>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/genreBrowse.jpg'
    name: "browseGenre"


    GridLayout:
        cols: 1

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll)

        Button:
            text: "Povratak"
            on_release:
                app.root.current = "menu"
                root.manager.transition.direction = "left"

<browseYear>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'resources/images/yearsBrowse.jpg'
    name: "browseYear"


    GridLayout:
        cols: 1

        BoxLayout:
            id: Scroll
            orientation: 'vertical'
            spacing: 0.01
            cols: 1
            on_kv_post: root.createListView(Scroll)

        Button:
            text: "Povratak"
            on_release:
                app.root.current = "menu"
                root.manager.transition.direction = "left"